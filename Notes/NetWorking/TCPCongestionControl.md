TCP拥塞控制算法
防止网络拥塞，确保公平、高效地利用网络带宽。通过动态调整发送速率，确保数据能够顺利传输，而不会导致网络过载。

# 四个阶段
1. Slow start 慢启动
   1. 初始时，TCP 发送窗口（Congestion Window, CWND）设置较小（通常为 1-2 个 MSS）。
   2. 每当确认（ACK）返回时，窗口大小指数增长（每个 RTT 加倍）。
   3. 当 CWND 达到慢启动门限（ssthresh）时，进入拥塞避免阶段。

2. Congestion Avoidance拥塞避免
   1. 发送窗口线性增长（每个 RTT 增加 1 个 MSS）。
   2. 避免指数增长过快导致网络拥塞。
   3. 直到发生数据包丢失（超时或 3 次 ACK ），进入快速恢复或慢启动。

3. Fast Retransmit快速重传
   1. 当 TCP 发送端连续收到 3 个相同的 ACK（表明某个数据包可能丢失），立即重传丢失的数据，而不等超时发生。
   2. 避免长时间等待超时重传，提高传输效率。

4. Fast Recovery快速恢复
   - 遇到 3 个重复 ACK 时：
    1. 将 ssthresh 设为当前 CWND 的一半（防止过度减少发送速率）。
    2. 直接进入拥塞避免阶段，而不是重新进入慢启动。
   - 这样可以更快地恢复数据传输，减少吞吐量损失。

# 常见拥塞控制算法
TCP Tahoe
采用慢启动、拥塞避免、超时重传机制。
发生丢包时，CWND 直接降为 1，重新进入慢启动。
适用于较稳定的网络，但丢包后恢复速度较慢。

TCP Reno
改进了 Tahoe，加入快速恢复机制。
发生 3 次重复 ACK 时，执行快速恢复，而不是直接进入慢启动。
适用于轻微丢包的环境，避免不必要的慢启动。

TCP New Reno
改进了 Reno，支持部分 ACK 处理（即当多个数据包丢失时，不会立即进入慢启动，而是继续处理未丢失的数据）。
适用于高丢包率的环境，提高吞吐量。

TCP BBR（Bottleneck Bandwidth and RTT）
现代 TCP 拥塞控制算法，由 Google 开发。
通过测量带宽和 RTT，动态调整发送速率，而不是依赖丢包检测。
比传统 TCP（如 Reno、Cubic）吞吐量更高，在高带宽、低延迟网络中表现优越。

# Recap
✅ TCP Tahoe：适用于稳定网络，丢包恢复较慢。
✅ TCP Reno：适用于轻微丢包的环境，加入快速恢复。
✅ TCP New Reno：适用于高丢包环境，优化了部分 ACK 处理。
✅ TCP BBR：适用于高带宽低延迟网络，能动态调整速率，提高吞吐量。

# Round-Trip Time RTT 往返时间

RTT 是指数据包从发送方传输到接收方，并返回确认（ACK）所需的总时间。它是衡量网络延迟的重要指标，通常以毫秒（ms）为单位。
RTT=发送时间+传播延迟+处理时间+传播延迟+返回时间

RTT 的影响因素
网络拥塞：如果网络繁忙，数据包排队等待传输，RTT 会增加。
物理距离：数据包在不同地区传输时，路径越长，RTT 越大。
网络设备：路由器、交换机的处理能力影响 RTT。
带宽：较低的带宽可能导致数据包传输速度慢，影响 RTT。
丢包率：如果数据包丢失，必须重新发送，导致 RTT 增加。
